if (self.CavalryLogger) { CavalryLogger.start_js(["krylL"]); }

__d("PlaceListFeedAttachmentMapper",[],(function(a,b,c,d,e,f){var g={};a={registerPlaceListFeedAttachment:function(a,b){var c=g[a];!c?g[a]=[b]:c.push(b)},getFeedStoryDOMIDsForPostID:function(a){return g[a]||[]}};e.exports=a}),null);
__d("XPlaceListSpotlightController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/post/view_map/{post_id}/",{post_id:{type:"String",required:!0},uri:{type:"String"}})}),null);
__d("PlaceListPageTransitionsManager",["ActorURI","AsyncDialog","AsyncRequest","Layer","PageTransitionPriorities","PageTransitions","URI","XPlaceListSpotlightController","filterObject"],(function(a,b,c,d,e,f){__p&&__p();var g,h=!1,i=!1,j={},k=new Set(["story_fbid","id","spotlight"]);a={registerForTransitions:function(a,c,d){c=this._getKeyForURI(new(g||(g=b("URI")))(c));j[c]=a;this._registerHandler(d)},handleSpotlightClosed:function(){i&&!b("PageTransitions").isTransitioning()&&window.history.go(-1)},_registerHandler:function(a){__p&&__p();var c=this;if(h||!this._hasAnyPosts())return;h=!0;var d=this._getKeyForURI(b("PageTransitions").getNextURI());b("PageTransitions").registerHandler(function(e){__p&&__p();e=c._getKeyForURI(e);if(e in j){i=!0;c._handleTransition(j[e],a);b("PageTransitions").transitionComplete(!0);return!0}else if(i&&e==d){i=!1;c._maybeCloseSpotlight();b("PageTransitions").transitionComplete(!0);return!0}else{h=!1;return!1}},b("PageTransitionPriorities").SOCIAL_SEARCH_DIALOG)},_getKeyForURI:function(a){var c=b("filterObject")(a.getQueryData(),function(a,b){return k.has(b)});return new(g||(g=b("URI")))(a).setQueryData(c).getQualifiedURI().toString()},_handleTransition:function(a,c){var d=this;a=b("XPlaceListSpotlightController").getURIBuilder().setString("post_id",a).getURI();c&&(a=b("ActorURI").create(a,c));c=new(b("AsyncRequest"))(a).setAbortHandler(function(){return d.handleSpotlightClosed()}).setErrorHandler(function(){return d.handleSpotlightClosed()}).setAllowCrossPageTransition();b("AsyncDialog").send(c)},_maybeCloseSpotlight:function(){var a=b("Layer").getTopmostLayer();a&&a.hide()},_hasAnyPosts:function(){return Object.keys(j).length>0}};e.exports=a}),null);
__d("PlaceListAttachmentController",["PlaceListFeedAttachmentMapper","PlaceListPageTransitionsManager"],(function(a,b,c,d,e,f){a={init:function(a,c){b("PlaceListFeedAttachmentMapper").registerPlaceListFeedAttachment(c.postID,a),b("PlaceListPageTransitionsManager").registerForTransitions(c.postID,c.postURI,c.actorID)}};e.exports=a}),null);