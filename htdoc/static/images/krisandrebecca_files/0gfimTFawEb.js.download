if (self.CavalryLogger) { CavalryLogger.start_js(["R46b9"]); }

__d("CommentPlaceInfoDataConverter",[],(function(a,b,c,d,e,f){__p&&__p();e.exports={convert:function(a,b,c){a=a.target;return!a?null:this.getConfirmedPlaces(a,b,c).concat(this.getPendingPlaces(a,b,c))},getConfirmedPlaces:function(a,b,c){var d=this,e={commentID:c,mapState:1,postID:b};return a.place_list_items.nodes.map(function(a){a=a.recommendation_page;a=d._getPlaceData(a);return a?{mapContext:e,pageInfo:a}:null}).filter(function(a){return a!=null})},getPendingPlaces:function(a,b,c){var d=this,e={commentID:c,mapState:2,postID:b};return a.pending_places_for_attachment.map(function(a){a=d._getPlaceData(a);return a?{mapContext:e,pageInfo:a}:null}).filter(function(a){return a!=null})},_getPlaceData:function(a){return!a?null:{address:a.address?a.address.single_line_full_address:null,category:a.top_category_name,id:a.id,link:a.url,location:a.location?{latitude:a.location.latitude,longitude:a.location.longitude}:null,name:a.name,priceRange:a.price_range_description,profilePic:a.profile_picture.uri,rating:a.overall_rating||null}}}}),null);
__d("UFI2CommentPlaceInfoAttachment.react",["cx","invariant","Bootloader","CommentPlaceInfoDataConverter","CurrentUser","MultiPlacePageInfoCard.react","React","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.$2=function(){var a;return(a=this.props.comment)==null?void 0:a.legacy_fbid};d.$3=function(){var a;return(a=this.props.comment)==null?void 0:(a=a.parent_post_story)==null?void 0:a.id};d.componentDidMount=function(){this.$4()};d.$4=function(){__p&&__p();var a=this,c;if(!(((c=this.props.comment)==null?void 0:c.is_created_from_subscription)||((c=this.props.comment)==null?void 0:(c=c.author)==null?void 0:c.id)===b("CurrentUser").getID())||this.$2()===void 0)return;b("Bootloader").loadModules(["PlaceListMapUpdater","PlaceListInteractiveMapOperation"],function(c,d){__p&&__p();var e,f=a.$1;if(f==null)return;e=(e=a.props.attachment)==null?void 0:e.target;var g=a.$3(),i=a.$2();e&&g!=void 0&&i!=void 0||h(0,4068);e=b("CommentPlaceInfoDataConverter").getConfirmedPlaces(e,g,i);g=e.filter(function(a){return a.pageInfo!=null&&a.pageInfo.location!=null}).map(function(c){c=b("nullthrows")(c.pageInfo);return{data:{icons:a.$5(),id:c.id,location:b("nullthrows")(c.location)},operation:d.ADD}});c.updateMap({commentFBID:i,ufiNode:f},{mapBoundingPoints:null,pins:g})},"UFI2CommentPlaceInfoAttachment.react")};d.$5=function(){return{dotRetinaUrl:"/images/place_list/primary_categories/glyph-dot-default-2x.png",dotUrl:"/images/place_list/primary_categories/glyph-dot-default.png",pinRetinaUrl:"/images/place_list/primary_categories/glyph-pin-default-2x.png",pinUrl:"/images/place_list/primary_categories/glyph-pin-default.png"}};d.render=function(){var a=this,c,d=this.props.attachment,e=this.$2(),f=this.$3();d&&e!=void 0&&f!=void 0||h(0,4069);var g=b("CommentPlaceInfoDataConverter").convert(d,f,e);d=d.target;g||h(0,4070);return b("React").jsx("div",{className:"_6suz",ref:function(b){return a.$1=b},children:b("React").jsx(b("MultiPlacePageInfoCard.react"),{actorID:(c=this.props.comment)==null?void 0:(c=c.author)==null?void 0:c.id,attachmentPermissions:d&&{canViewerAdd:!!d.can_viewer_add_to_attachment,canViewerAddSuggested:!!d.can_viewer_add_suggested_to_attachment,canViewerCurate:!!d.can_viewer_curate_attachment,canViewerRemove:!!d.can_viewer_remove_from_attachment,canViewerRemoveSuggested:!!d.can_viewer_remove_suggested_from_attachment,commentIDForButtonOnEmpty:e},pagesData:g||[],postID:f})})};return c}(b("React").Component);e.exports=a}),null);