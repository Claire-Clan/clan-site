if (self.CavalryLogger) { CavalryLogger.start_js(["SK5tj"]); }

__d("GroupsApp",["AsyncRequest","Event","ge"],(function(a,b,c,d,e,f){a={loadAsyncOnClickEvent:function(a,c,d,e){b("Event").listen(c,"click",function(c){e&&c.stopImmediatePropagation(),new(b("AsyncRequest"))().setURI(d).setHandler(function(){a!==null&&a.hide()}).send()})},loadAsyncOnClick:function(a,b,c){this.loadAsyncOnClickEvent(a,b,c,!1)},loadAsyncOnClickAndConsumeEvent:function(a,b,c){this.loadAsyncOnClickEvent(a,b,c,!0)},loadAsyncOnClickWithDialogId:function(a,c,d){b("Event").listen(c,"click",function(c){b("ge")(a)!==null&&b("ge")(a).remove(),new(b("AsyncRequest"))().setURI(d).send()})}};e.exports=a}),null);
__d("XCommentPlaceTypeaheadBootstrapController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/place_list/comment_place_typeahead/bootstrap/",{comment_fbid:{type:"String"}})}),null);
__d("XCommentPlaceTypeaheadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/place_list/comment_place_typeahead/",{comment_fbid:{type:"String"},place_list_id:{type:"String"},value:{type:"String",defaultValue:""}})}),null);
__d("CommentPlaceTypeahead.react",["cx","fbt","invariant","React","WebAsyncSearchSource","XCommentPlaceTypeaheadBootstrapController","XCommentPlaceTypeaheadController","XUITypeahead.react","joinClasses"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b.commentID||b.placeListID||i(0,4977);b=a.call(this,b)||this;b.$1=b.$2();b.state={query:""};return b}var d=c.prototype;d.render=function(){var a=this,c={focusedOnInit:!0,placeholder:h._("Type your recommendation"),showEntriesOnFocus:!0,viewStyle:"rich",onEnterWithoutSelection:function(a){a.preventDefault(),a.stopPropagation()}};return b("React").jsx(b("XUITypeahead.react"),babelHelpers["extends"]({},c,this.props,{className:b("joinClasses")(this.props.className,"_4kol"),onChange:function(b){return a.setState({query:b.target.value})},onSelectAttempt:this.props.onSelectPlace,queryString:this.state.query,searchSource:this.$1}))};d.$2=function(){return new(b("WebAsyncSearchSource"))({getAllForEmptyQuery:!this.props.showNoResultsForEmptyQuery,queryRequests:[{uri:b("XCommentPlaceTypeaheadController").getURIBuilder().setString("comment_fbid",this.props.commentID).setString("place_list_id",this.props.placeListID).getURI()}],bootstrapRequests:[{uri:b("XCommentPlaceTypeaheadBootstrapController").getURIBuilder().setString("comment_fbid",this.props.commentID).getURI()}]})};return c}(b("React").Component);e.exports=a}),null);
__d("XPlaceListCommentRemoveAddAttachmentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/place_list/remove_comment_add_attachment/",{comment_id:{type:"String",required:!0}})}),null);
__d("PlaceListFancyLinkCommentButton.react",["ix","cx","fbt","ActorURI","Image.react","Layout.react","PlaceListSurvey","React","XAsyncRequest","XPlaceListCommentRemoveAddAttachmentController","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("Layout.react").Column,k=b("Layout.react").FillColumn;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsxs(b("Layout.react"),{className:"_5ofu _1xap",onClick:this.props.onClick,children:[a.jsx(j,{className:"_26h2",children:a.jsx(b("Image.react"),{className:"_5og4",src:g("116987")})}),a.jsxs(k,{className:"_5og5",children:[a.jsxs("div",{className:"_5z6p",children:[a.jsx("div",{className:"_5og6",children:this.props.isAddingMore?i._("Add more recommendations"):i._("Recommend a Place")}),b("React").jsx("div",{className:"_2q1t",children:i._("Link to Page")})]}),b("React").jsx(l,babelHelpers["extends"]({},this.props))]})]})};return c}(b("React").Component);var l=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){return this.props.isAddingMore?null:b("React").jsx("div",{className:"_4nxw",children:b("React").jsx("a",{href:"#",className:"_4nxx",onClick:this.$1.bind(this)})})};d.$1=function(a){var c=this,d=b("XPlaceListCommentRemoveAddAttachmentController").getURIBuilder().setString("comment_id",this.props.commentID).getURI();this.props.actorID!=null&&(d=b("ActorURI").create(d,this.props.actorID));new(b("XAsyncRequest"))(d).setHandler(function(a){a.payload&&a.payload.surveyURI&&b("PlaceListSurvey").showSurvey(a.payload.surveyURI)}).setErrorHandler(function(){c.props.onChangeAttachmentPermissions({canViewerAdd:!0})}).send();this.props.onChangeAttachmentPermissions({canViewerAdd:!1});a.stopPropagation()};return a}(b("React").Component);e.exports=a}),null);
__d("XPlaceListUpdateFeedStoryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/placelist/update_feed_story/",{comment_fbid:{type:"String"},dom_id:{type:"String",required:!0},post_id:{type:"String"}})}),null);
__d("PlaceListCommentFeedStoryUpdater",["csx","ActorURI","DOM","Parent","XAsyncRequest","XPlaceListUpdateFeedStoryController","ge","getOrCreateDOMID"],(function(a,b,c,d,e,f,g){__p&&__p();var h={};a={refreshFeedStoryForUFIRootID:function(a,c,d,e,f){a=b("ge")(a);if(!a)return;this.refreshFeedStory(a,c,d,e,f)},refreshFeedStory:function(a,b,c,d,e){a=this._findTargetNode(a);a&&this._updateNode(a,b,c,d,e)},registerFeedContext:function(a,c){a=this._findTargetWithinTree(a);h[b("getOrCreateDOMID")(a)]=c},_updateNode:function(a,c,d,e,f){a=b("getOrCreateDOMID")(a);d=b("XPlaceListUpdateFeedStoryController").getURIBuilder().setString("comment_fbid",d).setString("post_id",c).setString("dom_id",a).getURI();f!=null&&(d=b("ActorURI").create(d,f));c=e!=null?e:h[a];new(b("XAsyncRequest"))(d).setData(c!=null?{feed_context:c}:{}).send()},_findTargetNode:function(a){a=b("Parent").bySelector(a,"._5pcr");return this._findTargetWithinTree(a)},_findTargetWithinTree:function(a){return a?b("DOM").find(a,"._3x-2"):null}};e.exports=a}),null);
__d("PlaceListMapUpdater",["PlaceListCommentFeedStoryUpdater","PlaceListEventEmitter","PlaceListFeedAttachmentMapper","PlaceListMapEvents"],(function(a,b,c,d,e,f){__p&&__p();e.exports={updateMap:function(a,c,d){var e=a.ufiNode,f=a.commentFBID;a=a.feedContext;b("PlaceListCommentFeedStoryUpdater").refreshFeedStory(e,null,f,a,d);this._broadcastMapUpdate(c)},updateMapForUFIRootID:function(a,c,d){var e=a.ufiRootID,f=a.commentFBID;a=a.feedContext;b("PlaceListCommentFeedStoryUpdater").refreshFeedStoryForUFIRootID(e,null,f,a,d);this._broadcastMapUpdate(c)},updateMapForPostID:function(a,c,d){b("PlaceListFeedAttachmentMapper").getFeedStoryDOMIDsForPostID(a).forEach(function(c){return b("PlaceListCommentFeedStoryUpdater").refreshFeedStoryForUFIRootID(c,a,null,null,d)}),this._broadcastMapUpdate(c)},_broadcastMapUpdate:function(a){a=a;a instanceof Array&&(a={mapBoundingPoints:null,pins:a});if(a==null)return;b("PlaceListEventEmitter").emit(b("PlaceListMapEvents").PLACE_UPDATE,a)}}}),null);
__d("XCommentAddPlaceListItemController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/placelist_comment/add_item/",{comment_fbid:{type:"String",required:!0},place_ids:{type:"StringVector",required:!0}})}),null);
__d("AddPlaceToMapComponent.react",["cx","fbt","invariant","ActorURI","AsyncRequest","CommentPlaceTypeahead.react","Link.react","PlaceListEventEmitter","PlaceListFancyLinkCommentButton.react","PlaceListMapEvents","PlaceListMapUpdater","React","ReactDOM","XCommentAddPlaceListItemController","XUISpinner.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j="add";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.state={isLoading:!1,isShowingTypeahead:!1};return b}var d=c.prototype;d.render=function(){var a=this;if(this.state.isLoading)return b("React").jsx("div",{className:"_5jpv",children:b("React").jsx(b("XUISpinner.react"),{})});else if(this.state.isShowingTypeahead)return b("React").jsx(b("CommentPlaceTypeahead.react"),{className:this.props.isAddingMore?"":"_x_w",commentID:this.props.commentID,onBlur:function(){return a.setState({isShowingTypeahead:!1})},onSelectPlace:function(b){return a.$1(b)},tallInput:!0});else return b("React").jsx(k,babelHelpers["extends"]({},this.props,{onClick:function(){return a.setState({isShowingTypeahead:!0})}}))};d.$1=function(a){__p&&__p();var c=this,d=b("XCommentAddPlaceListItemController").getURIBuilder().setString("comment_fbid",this.props.commentID).setStringVector("place_ids",[a.getUniqueID()]).getURI();this.props.actorID&&(d=b("ActorURI").create(d,this.props.actorID));new(b("AsyncRequest"))(d).setHandler(function(d){var e=c.$2(d.payload.pagesData,a.getUniqueID());b("PlaceListMapUpdater").updateMap({ufiNode:b("ReactDOM").findDOMNode(c),commentFBID:c.props.commentID},{mapBoundingPoints:d.payload.newMapBounds,pins:e?[e]:[]},c.props.actorID);c.setState({isLoading:!1,isShowingTypeahead:!1});b("PlaceListEventEmitter").emit(b("PlaceListMapEvents").UPDATE_TO_FEED_STORY_COMMENTS,{commentFBID:c.props.commentID,pagesData:d.payload.pagesData,node:b("ReactDOM").findDOMNode(c)});c.props.onRefreshPlaces(d.payload.pagesData)}).setErrorHandler(function(){return c.setState({isLoading:!1})}).send();this.setState({isLoading:!0})};d.$2=function(a,b){a=a.filter(function(a){return a.pageInfo&&a.pageInfo.id===b});a.length>0||i(0,292);return!a[0].pageInfo.location?null:{data:{icons:a[0].pageInfo.icons,id:a[0].pageInfo.id,location:a[0].pageInfo.location},operation:j}};return c}(b("React").Component);var k=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){return this.props.isAddingMore?b("React").jsx(b("Link.react"),{className:"_5jpv _487h",onClick:this.props.onClick,children:h._("Add More Recommendations")}):b("React").jsx(b("PlaceListFancyLinkCommentButton.react"),{commentID:this.props.commentID,isAddingMore:this.props.isAddingMore,onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions,onClick:this.props.onClick,actorID:this.props.actorID})};return a}(b("React").Component);e.exports=a}),null);
__d("CurationModeDeps",["CenteredContainer.react","CommentPlaceTypeahead.react","XUIAmbientNUX.react","XUIButton.react","XUIGrayText.react","XUISpinner.react","XUIText.react"],(function(a,b,c,d,e,f){a={CenteredContainer:b("CenteredContainer.react"),CommentPlaceTypeahead:b("CommentPlaceTypeahead.react"),XUIAmbientNUX:b("XUIAmbientNUX.react"),XUIButton:b("XUIButton.react"),XUIGrayText:b("XUIGrayText.react"),XUISpinner:b("XUISpinner.react"),XUIText:b("XUIText.react")};e.exports=a}),null);
__d("XCurationModeShouldShowNUXController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/curation_mode/nux/",{})}),null);
__d("CurationStateSubscriptionHandler",["CurationStateSubscriptionList","XAsyncRequest","XCurationModeShouldShowNUXController"],(function(a,b,c,d,e,f){__p&&__p();var g={},h={getSubscriptionListForPostID:function(a){var c=g[a];c||(g[a]=new(b("CurationStateSubscriptionList"))(a));return g[a]},toggleAllOffExceptForPostID:function(a){Object.keys(g).forEach(function(b){b!==a&&g[b].toggleOff("curate_mode_toggled_due_to_other_post")})},getSubscriptionListAndMaybeShowNuxForPostID:function(a,c){var d=Object.keys(g).length===0;a=h.getSubscriptionListForPostID(a);if(d){var e=b("XCurationModeShouldShowNUXController").getURIBuilder().getURI();new(b("XAsyncRequest"))(e).setHandler(function(a){d=a.payload,d&&c()}).send()}return a}};e.exports=h}),null);
__d("XCurationLoggingEventsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/placelist_comment/log_toggle/",{post_id:{type:"String",required:!0},logging_event:{type:"Enum",required:!0,enumType:1}})}),null);
__d("CurationStateSubscriptionList",["CurationStateSubscriptionHandler","SubscriptionList","XAsyncRequest","XCurationLoggingEventsController"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c.isToggled=!1;c.postID=b;return c}var d=c.prototype;d.add=function(b){b(this.isToggled);return a.prototype.add.call(this,b)};d.fireToggle=function(c){this.isToggled=!this.isToggled;a.prototype.fireCallbacks.call(this,this.isToggled);this.isToggled&&b("CurationStateSubscriptionHandler").toggleAllOffExceptForPostID(this.postID);c=c;c==null&&(c=this.isToggled?"curated_rex_toggled_on":"curated_rex_toggled_off");c=b("XCurationLoggingEventsController").getURIBuilder().setEnum("logging_event",c).setString("post_id",this.postID).getURI();new(b("XAsyncRequest"))(c).send()};d.toggleOff=function(a){this.isToggled&&this.fireToggle(a)};d.toggleOn=function(){this.isTogged||this.fireToggle()};return c}(b("SubscriptionList"));e.exports=a}),null);
__d("PlacePageInfoAggregation.react",["cx","fbt","AddPlaceToMapComponent.react","CurationStateSubscriptionHandler","PlaceListEventEmitter","PlaceListInfoCardHeader.react","PlaceListMapEvents","PlacePageInfoCard.react","React","ReactDOM","ShimButton.react","SubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=3;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this;return b("React").jsx("div",babelHelpers["extends"]({},this.props,{children:this.props.pageSections.map(function(b){return a.$1(b)})}))};d.$1=function(a){if(a.length===0)return null;var c=a[0].mapContext?a[0].mapContext.mapState:1;return b("React").jsx(j,{attachmentPermissions:this.props.attachmentPermissions,mapState:c,onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions,onChangePlaceState:this.props.onChangePlaceState,onRefreshPlaces:this.props.onRefreshPlaces,pagesData:a,postID:this.props.postID,actorID:this.props.actorID},"mapstate_"+c)};return c}(b("React").Component);var j=function(c){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,c);function a(a){var d;d=c.call(this,a)||this;d.$4=function(a){d.setState({isVisibleToViewer:a})};d.$3=new(b("SubscriptionsHandler"))();a=d.props.mapState===5&&d.props.attachmentPermissions&&d.props.attachmentPermissions.canViewerCurate;d.$1=d.props.postID&&a?new(b("CurationStateSubscriptionHandler").getSubscriptionListForPostID)(d.props.postID):null;d.state={isShowingAll:!1,isVisibleToViewer:!a};return d}var d=a.prototype;d.componentDidMount=function(){var a=this;!this.state.isVisibleToViewer&&this.$1&&(this.$2=this.$1.add(this.$4));this.$3.addSubscriptions(b("PlaceListEventEmitter").addListener(b("PlaceListMapEvents").UPDATE_TO_FEED_STORY_COMMENTS,function(c){if(a.props.pagesData[0].mapContext&&c.commentFBID===a.props.pagesData[0].mapContext.commentID){var d=b("ReactDOM").findDOMNode(a),e=c.node;d&&d.contains(e)&&a.setState({isShowingAll:!0});a.props.onRefreshPlaces(c.pagesData)}}))};d.componentWillUnmount=function(){this.$3.release(),this.$2&&this.$2.remove()};d.render=function(){__p&&__p();var a=this;if(!this.state.isVisibleToViewer)return null;var c=this.props.pagesData,d=this.props.pagesData[0].mapContext,e=this.props.mapState===2,f=this.props.attachmentPermissions,g=null,j=this.props.mapState!==2&&this.props.mapState!==5,l=f?f.canViewerCurate&&this.props.mapState==5:!1;c.length>1&&e&&(g=b("React").jsx(b("PlaceListInfoCardHeader.react"),{canViewerRemove:f?f.canViewerRemove||l:!1,headerLabel:h._("Did you mean..."),mapContext:d,numPlaces:c.length,onChangePlaceState:this.props.onChangePlaceState}));l=null;c.length>i&&!this.state.isShowingAll?(c=c.slice(0,i),l=b("React").jsx(k,{onClick:function(){return a.setState({isShowingAll:!0})}})):f&&f.canViewerAdd&&j&&d!=null&&(l=b("React").jsx(b("AddPlaceToMapComponent.react"),{commentID:d.commentID,isAddingMore:!0,onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions,onRefreshPlaces:this.$5.bind(this),actorID:this.props.actorID}));f=this.props.mapState===5?this.$6(c):c.map(function(a){return{pageData:a,disableHeader:g!==null||!e}});return b("React").jsxs("div",{className:"_3-e2",children:[g,f.map(function(c,d){return b("React").createElement(b("PlacePageInfoCard.react"),babelHelpers["extends"]({},c.pageData,{attachmentPermissions:a.props.attachmentPermissions,disableHeader:c.disableHeader,key:d,onChangePlaceState:a.props.onChangePlaceState,actorID:a.props.actorID}))}),l]})};d.$6=function(a){__p&&__p();a=a.map(function(a){return a.suggestedRecInfo?{pageData:a,suggesterName:a.suggestedRecInfo.suggestorName}:null});var b=a.reduce(function(a,b){if(!b)return a;b.suggesterName&&b.suggesterName in a?a[b.suggesterName].push({pageData:b.pageData,disableHeader:!0}):a[b.suggesterName]=[{pageData:b.pageData,disableHeader:!1}];return a},{});return Object.keys(b).map(function(a){return b[a]}).reduce(function(a,b){return a.concat(b)},[])};d.$5=function(a){a.length>=i&&this.setState({isShowingAll:!0}),this.props.onRefreshPlaces(a)};return a}(b("React").Component),k=function(a){return b("React").jsx(b("ShimButton.react"),{className:"_3-e7",form:"link",onClick:a.onClick,children:h._("See All Recommendations")})};e.exports=a}),null);
__d("PlaceListMapState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NORMAL:1,PENDING:2,REMOVABLE:3,REMOVED:4,SUGGESTED:5})}),null);
__d("CurationModes",[],(function(a,b,c,d,e,f){e.exports={ADD_PLACE:"add_place",NONE:"none",UNKNOWN:"unknown"}}),null);
__d("XCommentAddSuggestedPlaceController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/placelist_comment/add_suggested_place/",{comment_fbid:{type:"String",required:!0},place_id:{type:"String",required:!0}})}),null);
__d("SuggestRecommendationToComment.react",["cx","fbt","CurationModeDeps","PlaceListEventEmitter","PlaceListMapEvents","React","ReactDOM","XAsyncRequest","XCommentAddSuggestedPlaceController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("CurationModeDeps").CommentPlaceTypeahead,j=b("CurationModeDeps").XUISpinner;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.state={isLoading:!1};return b}var d=c.prototype;d.render=function(){var a=this;if(this.state.isLoading)return b("React").jsx("div",{className:"_2zea",children:b("React").jsx(j,{})});else return b("React").jsx(i,{commentID:this.props.commentID,onBlur:function(){return a.props.onBlur()},onSelectPlace:function(b){return a.$1(b)},placeholder:h._("Type your suggestion"),showNoResultsForEmptyQuery:!0,tallInput:!0})};d.$1=function(a){var c=this;a=b("XCommentAddSuggestedPlaceController").getURIBuilder().setString("comment_fbid",this.props.commentID).setString("place_id",a.getUniqueID()).getURI();var d=b("ReactDOM").findDOMNode(this);new(b("XAsyncRequest"))(a).setHandler(function(a){c.setState({isLoading:!1}),c.props.onRefreshPlaces(a.payload.pagesData),c.props.onBlur(),b("PlaceListEventEmitter").emit(b("PlaceListMapEvents").UPDATE_TO_FEED_STORY_COMMENTS,{commentFBID:c.props.commentID,pagesData:a.payload.pagesData,node:d})}).setErrorHandler(function(){return c.setState({isLoading:!1})}).send();this.setState({isLoading:!0})};return c}(b("React").Component);e.exports=a}),null);
__d("XPlaceListCommentNoMorePlacesMarkedController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/async/place_list/no_more_places_marked/",{comment_id:{type:"String",required:!0}})}),null);
__d("CurateCommentPlaceInfo.react",["cx","fbt","CurationModes","CurationStateSubscriptionHandler","KeeperPendingButtons.react","Layout.react","React","SuggestRecommendationToComment.react","XAsyncRequest","XPlaceListCommentNoMorePlacesMarkedController"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("Layout.react").FillColumn,j=function(c){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.onAdd=function(a){a&&(a.preventDefault(),this.props.onAdd())};d.render=function(){var a=h._("Link to Page"),c=this.props.isAddingMore?h._("No More Places"):h._("No");return b("React").jsx("div",{className:"_d_y _3-8x clearfix",children:b("React").jsx(b("KeeperPendingButtons.react"),{className:"_2q-1",confirmLabel:a,denyLabel:c,onAdd:this.onAdd.bind(this),isDisabled:!1,onRemove:this.$1.bind(this)})})};d.$1=function(a){var c=this;if(a){a.preventDefault();var d=b("XPlaceListCommentNoMorePlacesMarkedController").getURIBuilder().setString("comment_id",this.props.commentID).getURI();new(b("XAsyncRequest"))(d).setErrorHandler(function(){c.props.onChangeAttachmentPermissions({canViewerAddSuggested:!0})}).send();this.props.onChangeAttachmentPermissions({canViewerAddSuggested:!1});a.stopPropagation()}};return a}(b("React").Component),k=function(c){"use strict";babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){var a=this.props.isAddingMore?h._("Is another place being recommended?"):h._("Is a place being recommended?");return b("React").jsx(b("Layout.react"),{className:"_2phz _22k8",children:b("React").jsx(i,{className:"_22kb",children:a})})};return a}(b("React").Component);a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$3=function(a){d.setState({isShown:a})};d.$1=new(b("CurationStateSubscriptionHandler").getSubscriptionListForPostID)(d.props.postID);d.state={isShown:!1,curationMode:b("CurationModes").NONE};return d}var d=c.prototype;d.componentDidMount=function(){this.$2=this.$1.add(this.$3)};d.componentWillUnmount=function(){this.$2&&this.$2.remove()};d.$4=function(a){this.setState({curationMode:a})};d.render=function(){if(!this.state.isShown)return null;var a;this.state.curationMode===b("CurationModes").ADD_PLACE&&this.props.commentID&&(a=b("React").jsx("div",{className:"_61sb",children:b("React").jsx(b("SuggestRecommendationToComment.react"),{commentID:this.props.commentID,isAddingMore:this.props.isAddingMore,onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions,onRefreshPlaces:this.props.onRefreshPlaces,onBlur:this.$4.bind(this,b("CurationModes").NONE)})}));return b("React").jsxs("div",{className:"_3-8x _1ge2 _3-e2",children:[b("React").jsx(k,{isAddingMore:this.props.isAddingMore,removeFunction:this.$4.bind(this,b("CurationModes").NONE)}),b("React").jsx("div",{className:"_4yjk _2phz",children:b("React").jsx(j,{commentID:this.props.commentID,isAddingMore:this.props.isAddingMore,onAdd:this.$4.bind(this,b("CurationModes").ADD_PLACE),onChangeAttachmentPermissions:this.props.onChangeAttachmentPermissions})}),a]})};return c}(b("React").Component);e.exports=a}),null);
__d("MultiPlacePageInfoCard.react",["csx","cx","AddPlaceToMapComponent.react","CurateCommentPlaceInfo.react","Parent","PlaceListEventEmitter","PlaceListMapEvents","PlaceListMapState","PlaceListMapUpdater","PlacePageInfoAggregation.react","React","ReactDOM","SubscriptionsHandler","areEqual","nullthrows"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=[[2],[5],[3],[null,1]],k={};a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$1=JSON.stringify(c);d.$2=new(b("SubscriptionsHandler"))();d.state={attachmentPermissions:d.props.attachmentPermissions?Object.assign({},d.props.attachmentPermissions):null,pagesData:(k[d.$1]||c).pagesData.slice(0)};return d}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$3()&&this.props.isLocallyComposed&&this.refs.root&&this.refs.root.scrollIntoView();this.$2.addSubscriptions(b("PlaceListEventEmitter").addListener(b("PlaceListMapEvents").UPDATE_TO_FEED_STORY_COMMENTS,function(b){var c=a.state.attachmentPermissions;if(a.props.pagesData.length===0&&c&&b.commentFBID===c.commentIDForButtonOnEmpty){c=b.pagesData;a.setState({pagesData:c})}}))};d.UNSAFE_componentWillUpdate=function(a,c){(i||(i=b("areEqual")))(this.state,c)||(k[this.$1]=c)};d.render=function(){__p&&__p();var a=this,c=this.state.attachmentPermissions,d=j.map(function(b){return a.$4(b)}).filter(function(a){return a.length>0}),e,f,g=!0;if(d.length===0)f=c&&c.commentIDForButtonOnEmpty,g=!1,e=c&&c.canViewerAdd&&f&&!c.canViewerCurate?b("React").jsx(b("AddPlaceToMapComponent.react"),{commentID:f,isAddingMore:g,onChangeAttachmentPermissions:this.$5.bind(this),onRefreshPlaces:function(b){return a.setState({pagesData:b})},actorID:this.props.actorID}):null;else{var h;f=(h=this.state)!=null?(h=h.pagesData)!=null?(h=h[0])!=null?(h=h.mapContext)!=null?h.commentID:h:h:h:h;e=b("React").jsx(b("PlacePageInfoAggregation.react"),{attachmentPermissions:c,onChangeAttachmentPermissions:this.$5.bind(this),onChangePlaceState:this.$6.bind(this),onRefreshPlaces:function(b){return a.setState({pagesData:b})},pageSections:d,postID:this.props.postID,actorID:this.props.actorID})}e=c&&c.canViewerAddSuggested&&f&&this.props.postID?b("React").jsxs("div",{children:[e,b("React").jsx(b("CurateCommentPlaceInfo.react"),{commentID:f,postID:this.props.postID,isAddingMore:g,attachmentPermissions:c,onChangeAttachmentPermissions:this.$5.bind(this),onChangePlaceState:this.$6.bind(this),onRefreshPlaces:function(b){return a.setState({pagesData:b})}})]}):e;return e?b("React").jsx("div",{className:"_53jt",ref:"root",children:e}):null};d.$4=function(a){return this.state.pagesData.filter(function(b){b=b.mapContext?b.mapContext.mapState:null;return a.indexOf(b)>=0})};d.$5=function(a){this.setState({attachmentPermissions:Object.assign({},b("nullthrows")(this.state.attachmentPermissions),a)})};d.$6=function(a,c,d){__p&&__p();var e=this.state.pagesData,f=[],g=e.map(function(d){var e=d.pageInfo&&d.pageInfo.id,g=d.profileInfo&&d.profileInfo.id,h=d.suggestedRecInfo&&d.suggestedRecInfo.pageInfo&&d.suggestedRecInfo.pageInfo.id;e=e||g||h;if(e!==a||!d.mapContext)return d;g=Object.assign({},d.mapContext);g.mapState=c;h=d.pageInfo||d.suggestedRecInfo&&d.suggestedRecInfo.pageInfo;h!=null&&(c===1||c===3)&&f.push({data:{location:b("nullthrows")(h.location),icons:b("nullthrows")(h.icons),id:b("nullthrows")(h.id)},operation:"add"});return Object.assign({},d,{mapContext:g})});e=b("nullthrows")(b("nullthrows")(e[0]).mapContext).commentID;this.setState({pagesData:g.filter(function(a){a=a.mapContext?a.mapContext.mapState:null;return a!==4})});g={mapBoundingPoints:d,pins:f};this.$7(e,g);return this.state.pagesData};d.$3=function(){var a=b("ReactDOM").findDOMNode(this);return!a?!1:b("Parent").bySelector(a,"._23ce")!==null};d.$7=function(a,c){b("PlaceListMapUpdater").updateMap({ufiNode:b("ReactDOM").findDOMNode(this),commentFBID:a},c,this.props.actorID)};return c}(b("React").Component);e.exports=a}),null);